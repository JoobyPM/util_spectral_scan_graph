## Install the app
Install latest nodejs:
- https://nodejs.org/en/download/current/

Then clone project
`git clone https://github.com/JoobyPM/util_spectral_scan_graph/`

To run the app:
`node index.js`

By default, it runs on 8082, if you need to run on another port use env, e.g.`HTTP_PORT=8083`


Put `.csv` files (generated by Gateway util) to source folder.

Get into the chart on the web page:
`http://localhost:8082`


## Get.sh
There is a bit of bash automation, that helps generate and download the scan.
To use it:
1) Change `IP` address of Gateway in `get.sh` and run it.
2) It will request from GW scan and download it to source folder.
3) Enter the password or if you have ssh keys on GW, it goes in silent mode

## What this chart is about?
Chart build based on `.csv` generated by [util_spectral_scan](https://github.com/Lora-net/lora_gateway/tree/master/util_spectral_scan).
File contains frequency and array of RSSI level & RSSI count. 
``Where RSSI count - is the number of times the Base Station measured this RSSI level for this frequency``

This app calculating the averages between all entries of rssi level that detected (RSSI count!=0), by doing following:
```
RSSI_for_freq = SUM(rssi*current_RSSI_count,...)/RSSI_count_sum

where RSSI_count_sum - is the sum of all RSSI counts in the raw of frequency (in .csv)
```



## Referances
* [TP_Spectrum_Analysis_User_Guide](https://docs.thingpark.com/thingpark-enterprise/Content/Resources/DocLibrary/Others/TP_Spectrum_Analysis_User_Guide_rev2.pdf)
* [util_spectral_scan](https://github.com/Lora-net/lora_gateway/tree/master/util_spectral_scan)
